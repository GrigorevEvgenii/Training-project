(this["webpackJsonpsocial-media"]=this["webpackJsonpsocial-media"]||[]).push([[0],{12:function(e,t,a){e.exports={nav:"Navbar_nav__2imOE",navItem:"Navbar_navItem__16nSi"}},13:function(e,t,a){e.exports={posts:"MyPosts_posts__3tZ1c",title:"MyPosts_title__3q_Ko",subtitle:"MyPosts_subtitle__2xs3s",PostInputLabel:"MyPosts_PostInputLabel__c--yl",PostInput:"MyPosts_PostInput__1Ljwk",AddPostBtn:"MyPosts_AddPostBtn__2pdsB",AddNewPostContainer:"MyPosts_AddNewPostContainer__2sPCl"}},14:function(e,t,a){e.exports={Dialogs:"Dialogs_Dialogs__1HvdP",DialogsItems:"Dialogs_DialogsItems__LIXpe",Messages:"Dialogs_Messages__2OSA1",SendMessage:"Dialogs_SendMessage__1NwkL",SendMessageArea:"Dialogs_SendMessageArea__HC-UV",SendMessageBtn:"Dialogs_SendMessageBtn__3of2E"}},2:function(e,t,a){e.exports={users:"Users_users__2Iv27",pageButtons:"Users_pageButtons__1q9F3",pageButton:"Users_pageButton__1ZjBo",selectedPageButton:"Users_selectedPageButton__3I9sU",userContainer:"Users_userContainer__1Ycei",aboutUserContainer:"Users_aboutUserContainer__Tb5P-",userDescriptionContainer:"Users_userDescriptionContainer__2XS4y",locationContainer:"Users_locationContainer__1oxmJ",photoContainer:"Users_photoContainer__2PJTc",photo:"Users_photo__2hOPg",button:"Users_button__1saaY",userName:"Users_userName__1mt5V",userStatus:"Users_userStatus__3dsIO",userCountry:"Users_userCountry__6nBlk",userCity:"Users_userCity__2cNhS"}},24:function(e,t,a){e.exports={ProfileInfo:"ProfileInfo_ProfileInfo__34LEF",imgContainer:"ProfileInfo_imgContainer__1Au_4",img:"ProfileInfo_img__1lpBU"}},27:function(e,t,a){e.exports=a.p+"static/media/user.da338dae.png"},32:function(e,t,a){e.exports={header:"Header_header__1VCKf",img:"Header_img__3ifQS"}},48:function(e,t,a){e.exports={Profile:"Profile_Profile__3HF8E"}},49:function(e,t,a){e.exports={post:"Post_post__A0EJd"}},50:function(e,t,a){e.exports=a.p+"static/media/Spinner.9064981b.svg"},51:function(e,t,a){e.exports={DialogsItem:"DialogsItem_DialogsItem__16bfh"}},52:function(e,t,a){e.exports={MessagesItem:"MessagesItem_MessagesItem__34gIN"}},53:function(e,t,a){e.exports=a(83)},58:function(e,t,a){},78:function(e,t,a){},83:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(25),o=a.n(r),i=(a(58),a(22)),c=a(9),l=a(28),u=a(16),m=a(44).create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"c891f102-d06b-46c8-81d4-a7cd4255c13b"}}),g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return m.get("users?page=".concat(e,"&count=").concat(t))},p=function(e){return m.get("profile/".concat(e))},d=function(e){return m.delete("follow/".concat(e))},f=function(e){return m.post("https://social-network.samuraijs.com/api/1.0/follow/".concat(e))},_=function(){return m.get("auth/me")},E={posts:[{id:1,text:"Hi, how are you?",likesCount:12},{id:2,text:"It's my first post",likesCount:11},{id:3,text:"Blabla",likesCount:3},{id:4,text:"Dada",likesCount:11}],profile:null,currentText:"Some text",isFetching:!0},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NEW_TEXT":var a=Object.assign({},e);return a.currentText=t.text,a;case"ADD_POST":var n=Object(u.cloneDeep)(e);return n.posts=[].concat(Object(l.a)(e.posts),[{id:e.posts.length+1,text:e.currentText,likesCount:e.posts.length+1}]),n.currentText="",n;case"SET_PROFILE":return Object(c.a)({},e,{profile:t.profile});case"TOGGLE_FETCHING":return Object(c.a)({},e,{isFetching:t.isFetching});default:return e}},P={dialogs:[{id:1,name:"Dimych"},{id:2,name:"Andrew"},{id:3,name:"Sveta"},{id:4,name:"Sasha"},{id:5,name:"Viktor"},{id:6,name:"Valera"}],messages:[{id:1,message:"Hi"},{id:2,message:"How is your it-kamasutra?"},{id:3,message:"Yo"},{id:4,message:"Yo"},{id:5,message:"Yo"}],currentMessageBody:""},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_NEW_MESSAGE_TEXT":var a=Object(u.cloneDeep)(e);return a.currentMessageBody=t.messageBody,a;case"SEND_MESSAGE":var n=Object(u.cloneDeep)(e);return n.messages=[].concat(Object(l.a)(e.messages),[{id:e.messages.length+1,message:e.currentMessageBody}]),n.currentMessageBody="",n;default:return e}},C={users:[],pageSize:5,currentPage:1,isFetching:!0},b=function(e,t){return{type:"SET_USERS",users:e,totalCount:t}},N=function(e){return{type:"TOGGLE_FETCHING",isFetching:e}},y=function(e){return{type:"SET_CURRENT_PAGE",currentPage:e}},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FOLLOW":return Object(c.a)({},e,{users:e.users.map((function(e){return e.id===t.userId&&(e.followed=!0),e}))});case"UNFOLLOW":return Object(c.a)({},e,{users:e.users.map((function(e){return e.id===t.userId&&(e.followed=!1),e}))});case"SET_USERS":return Object(c.a)({},e,{users:t.users,totalCount:t.totalCount,currentPage:t.currentPage});case"TOGGLE_FETCHING":return Object(c.a)({},e,{isFetching:t.isFetching});case"SET_CURRENT_PAGE":return Object(c.a)({},e,{currentPage:t.currentPage});default:return e}},S={id:null,email:null,login:null,isAuth:!1},w=function(e){return{type:"SET_USER_DATA",id:e.id,email:e.email,login:e.login}},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER_DATA":return Object(c.a)({},e,{id:t.id,email:t.email,login:t.login,isAuth:!0});default:return e}},k=a(45),U=Object(i.c)({profilePage:h,dialogsPage:v,usersPage:O,auth:I}),M=Object(i.d)(U,Object(i.a)(k.a));window.store=M;var j=M,B=(a(78),a(17)),D=a(18),T=a(20),x=a(19),A=a(21),F=a(32),L=a.n(F),H=a(3),G=function(e){return s.a.createElement("header",{className:L.a.header},s.a.createElement("img",{className:L.a.img,src:"https://www.freelogodesign.org/Content/img/logo-ex-7.png"}),e.isAuth?e.login:s.a.createElement(H.b,{to:"/login"},"login"))},R=a(7),z=function(e){function t(){return Object(B.a)(this,t),Object(T.a)(this,Object(x.a)(t).apply(this,arguments))}return Object(A.a)(t,e),Object(D.a)(t,[{key:"componentDidMount",value:function(){this.props.getHeader()}},{key:"render",value:function(){return s.a.createElement(G,{isAuth:this.props.isAuth,login:this.props.login})}}]),t}(s.a.Component),W=Object(R.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}}),{setUserData:w,getHeader:function(){return function(e){_().then((function(t){e(w(t.data.data))}))}}})(z),X=a(12),Y=a.n(X),J=function(){return s.a.createElement("nav",{className:Y.a.nav},s.a.createElement("div",{className:Y.a.navItem},s.a.createElement(H.b,{to:"/Profile"},"Profile")),s.a.createElement("div",{className:Y.a.navItem},s.a.createElement(H.b,{to:"/Dialogs"},"Messages")),s.a.createElement("div",{className:Y.a.navItem},s.a.createElement(H.b,{to:"/Users"},"Users")),s.a.createElement("div",{className:Y.a.navItem},s.a.createElement("a",{href:"#"},"News")),s.a.createElement("div",{className:Y.a.navItem},s.a.createElement("a",{href:"#"},"Music")),s.a.createElement("div",{className:Y.a.navItem},s.a.createElement("a",{href:"#"},"Settings")))},V=a(48),K=a.n(V),q=a(13),Z=a.n(q),Q=a(49),$=a.n(Q),ee=function(e){return s.a.createElement("div",{className:$.a.post},s.a.createElement("img",{src:"https://movies4maniacs.liberty.me/wp-content/uploads/sites/1218/2015/09/avatarsucks.jpg"}),e.text,s.a.createElement("div",null,s.a.createElement("span",null,"like ",e.likesCount)))},te=Object(R.b)((function(e){return{currentText:e.profilePage.currentText,posts:e.profilePage.posts}}),(function(e){return{newText:function(t){e({type:"NEW_TEXT",text:t})},newPostHandler:function(){e({type:"ADD_POST"})}}}))((function(e){var t=e.posts.map((function(e){return s.a.createElement(ee,{text:e.text,likesCount:e.likesCount})}));return s.a.createElement("div",{className:Z.a.posts},s.a.createElement("div",{className:Z.a.title},s.a.createElement("span",{className:Z.a.subtitle},"My posts:")),t,s.a.createElement("div",{className:Z.a.AddNewPostContainer},s.a.createElement("label",{className:Z.a.PostInputLabel},"New Post",s.a.createElement("br",null),s.a.createElement("textarea",{className:Z.a.PostInput,onChange:function(t){e.newText(t.target.value)},value:e.currentText,rows:"4"})),s.a.createElement("button",{className:Z.a.AddPostBtn,onClick:function(){e.newPostHandler()}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0437\u0430\u043f\u0438\u0441\u044c")))})),ae=a(24),ne=a.n(ae),se=a(50),re=a.n(se),oe=function(){return s.a.createElement("div",null,s.a.createElement("img",{src:re.a}))},ie=a(27),ce=a.n(ie),le=function(e){return e.profile?s.a.createElement("div",{className:ne.a.ProfileInfo},s.a.createElement("div",{className:ne.a.imgContainer},s.a.createElement("img",{className:ne.a.img,src:e.profile.photos.large?e.profile.photos.large:ce.a})),s.a.createElement("div",{className:ne.a.description})):s.a.createElement(oe,null)},ue=function(e){return console.log(e),s.a.createElement("div",{className:K.a.Profile},s.a.createElement(le,{profile:e.profile}),s.a.createElement("div",null,s.a.createElement(te,null)))},me=a(11),ge=function(e){function t(){return Object(B.a)(this,t),Object(T.a)(this,Object(x.a)(t).apply(this,arguments))}return Object(A.a)(t,e),Object(D.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.match.params.userID;e||(e=2),this.props.getUserProfile(e)}},{key:"render",value:function(){return s.a.createElement(n.Fragment,null,this.props.isFetching?s.a.createElement(oe,null):null,s.a.createElement(ue,Object.assign({},this.props,{profile:this.props.profile})))}}]),t}(s.a.Component),pe=Object(me.e)(ge),de=Object(R.b)((function(e){return{isFetching:e.profilePage.isFetching,profile:e.profilePage.profile,id:e.auth.id}}),{getUserProfile:function(e){return function(t){p(e).then((function(e){t({type:"SET_PROFILE",profile:e.data}),t({type:"TOGGLE_FETCHING",isFetching:!1})}))}}})(pe),fe=a(14),_e=a.n(fe),Ee=a(51),he=a.n(Ee),Pe=function(e){var t="/dialogs/"+e.id;return s.a.createElement("div",{className:he.a.DialogsItem},s.a.createElement(H.b,{to:t},e.name))},ve=a(52),Ce=a.n(ve),be=function(e){return s.a.createElement("div",{className:Ce.a.MessagesItem},e.message)},Ne=function(e){var t=e.dialogs.map((function(e){return s.a.createElement(Pe,{name:e.name,id:e.id})})),a=e.messages.map((function(e){return s.a.createElement(be,{id:e.id,message:e.message})}));return s.a.createElement("div",{className:_e.a.Dialogs},s.a.createElement("div",{className:_e.a.DialogsItems},t),s.a.createElement("div",{className:_e.a.Messages},a),s.a.createElement("div",{className:_e.a.SendMessage},s.a.createElement("textarea",{rows:"4",className:_e.a.SendMessageArea,onChange:function(t){e.updateNewMessageHandler(t.target.value)},value:e.currentMessageBody}),s.a.createElement("button",{onClick:function(){e.sendMessageHandler()},className:_e.a.SendMessageBtn},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c")))},ye=Object(R.b)((function(e){return{dialogs:e.dialogsPage.dialogs,messages:e.dialogsPage.messages,currentMessageBody:e.dialogsPage.currentMessageBody}}),(function(e){return{updateNewMessageHandler:function(t){e({type:"UPDATE_NEW_MESSAGE_TEXT",messageBody:t})},sendMessageHandler:function(){e({type:"SEND_MESSAGE"})}}}))(Ne),Oe=a(2),Se=a.n(Oe),we=function(e){return s.a.createElement("div",{className:Se.a.users},s.a.createElement("div",{className:Se.a.pageButtons},s.a.createElement("span",null,s.a.createElement("i",{onClick:e.handlePreviousPageClick},"<"),e.pageButtons,s.a.createElement("i",{onClick:e.handleNextPageClick},">"))),e.users.map((function(t){return s.a.createElement("div",{className:Se.a.userContainer},s.a.createElement("div",{className:Se.a.photoContainer},s.a.createElement(H.b,{to:"Profile/".concat(t.id)},s.a.createElement("img",{src:t.photos.small?t.photos.small:ce.a,alt:"avatar",className:Se.a.photo})),!0===t.followed?s.a.createElement("button",{onClick:function(){return e.handleUnfollow(t.id)},className:Se.a.button},"Unfollow"):s.a.createElement("button",{onClick:function(){return e.handleFollow(t.id)},className:Se.a.button},"Follow")),s.a.createElement("div",{className:Se.a.aboutUserContainer},s.a.createElement("div",{className:Se.a.userDescriptionContainer},s.a.createElement("span",{className:Se.a.userName},t.name),s.a.createElement("span",{className:Se.a.userStatus},t.status)),s.a.createElement("div",{className:Se.a.locationContainer},s.a.createElement("span",{className:Se.a.userCountry},"item.location.country"),s.a.createElement("span",{className:Se.a.userCity},"item.location.city"))))})))},Ie=function(e){function t(){var e,a;Object(B.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(T.a)(this,(e=Object(x.a)(t)).call.apply(e,[this].concat(s)))).handlePageButtonClick=function(e,t){a.props.PageButtonClick(e,t)},a.handlePreviousPageClick=function(e,t){e--,a.props.arrowPageButtonClick(e,t)},a.handleNextPageClick=function(e,t){e++,a.props.arrowPageButtonClick(e,t)},a}return Object(A.a)(t,e),Object(D.a)(t,[{key:"componentDidMount",value:function(){this.props.getUsers(1,this.props.pageSize)}},{key:"render",value:function(){for(var e=this,t=Math.ceil(this.props.totalCount/this.props.pageSize),a=[],r=0;r<this.props.pageSize;r++)a.push(r+1),r===this.props.pageSize-1&&a.push(t);return a=a.map((function(t,n){return n===a.length-1?s.a.createElement("span",{onClick:function(){return e.handlePageButtonClick(t,e.props.pageSize)},className:t===e.props.currentPage?"".concat(Se.a.pageButton," + ").concat(Se.a.selectedPageButton):Se.a.pageButton},s.a.createElement("i",null,"... "),t):s.a.createElement("span",{onClick:function(){return e.handlePageButtonClick(t,e.props.pageSize)},className:t===e.props.currentPage?"".concat(Se.a.pageButton," + ").concat(Se.a.selectedPageButton):Se.a.pageButton},t)})),s.a.createElement(n.Fragment,null,this.props.isFetching?s.a.createElement(oe,null):null,s.a.createElement(we,{handlePreviousPageClick:this.handlePreviousPageClick,handleNextPageClick:this.handleNextPageClick,handleFollow:this.props.followUser,handleUnfollow:this.props.unFollowUser,pageButtons:a,users:this.props.users,currentPage:this.props.currentPage}))}}]),t}(s.a.Component),ke=Object(R.b)((function(e){return{users:e.usersPage.users,totalCount:e.usersPage.totalCount,currentPage:e.usersPage.currentPage,pageSize:e.usersPage.pageSize,isFetching:e.usersPage.isFetching}}),{getUsers:function(e,t){return function(a){g(e,t).then((function(e){a(b(e.data.items,e.data.totalCount)),a(y(1)),a(N(!1))}))}},PageButtonClick:function(e,t){return function(a){a(N(!0)),g(e,t).then((function(t){a(b(t.data.items,t.data.totalCount)),a(y(e)),a(N(!1))}))}},arrowPageButtonClick:function(e,t){return function(a){a(N(!0)),g(e,t).then((function(t){a(b(t.data.items,t.data.totalCount)),a(y(e)),a(N(!1))}))}},followUser:function(e){return function(t){f(e).then((function(a){t({type:"FOLLOW",userId:e})}))}},unFollowUser:function(e){return function(t){d(e).then((function(a){t({type:"UNFOLLOW",userId:e})}))}}})(Ie),Ue=function(e){return s.a.createElement("div",{className:"app-wrapper"},s.a.createElement(W,null),s.a.createElement(J,null),s.a.createElement("div",{className:"app-wrapper-content"},s.a.createElement(me.a,{render:function(){return s.a.createElement(de,null)},path:"/Profile/:userID?"}),s.a.createElement(me.a,{render:function(){return s.a.createElement(ye,null)},path:"/Dialogs"}),s.a.createElement(me.a,{render:function(){return s.a.createElement(ke,null)},path:"/Users/:userID?"})))};a.d(t,"render",(function(){return Me}));var Me=function(e){o.a.render(s.a.createElement(H.a,null,s.a.createElement(R.a,{store:j},s.a.createElement(Ue,null))),document.getElementById("root"))};Me(j.getState())}},[[53,1,2]]]);
//# sourceMappingURL=main.6f62a890.chunk.js.map